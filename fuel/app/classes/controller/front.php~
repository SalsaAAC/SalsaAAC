<?php

abstract class Controller_Front extends Controller {

	public function before()
	{
		parent::before();
		require_once(APPPATH.'vendor'.DS.'POT'.DS.'OTS.php');

		\Config::load('salsa', true);		
		switch (\Config::get('salsa.otserv.driver', 'POT::DB_MYSQL'))
		{
			case 'POT::DB_SQLITE':
				$driver = POT::DB_SQLITE;
				break;
			case 'POT::DB_PGSQL':
				$driver = POT::DB_PGSQL;
				break;
			case 'POT::DB_ODBC':
				$driver = POT::DB_ODBC;
				break;
			default:
				$driver = POT::DB_MYSQL;	
		}
		$data = array(
			'driver'   => $driver,
			'prefix'   => \Config::get('salsa.otserv.prefix', ''),
			'host'     => \Config::get('salsa.otserv.host', 'localhost'),
			'user'     => \Config::get('salsa.otserv.user', 'root'),
			'password' => \Config::get('salsa.otserv.password', ''),
			'database' => \Config::get('salsa.otserv.database', 'otserv'),
		);
		POT::connect(null, $data);	
	}
}

/* End of file front.php */
